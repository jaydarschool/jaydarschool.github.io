<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
  </head>
  <body onload = "setVisTim()">
  <h1>yummy cookies, they're also good for your browser</h1>
  <p>I will demonstrate the power of Cookies by displaying some useless facts, using them.
    <br><span id = "times-visited"></span>
    <br>You have looked at this site for about <span id = "time">0</span> <span id = "unit">seconds</span>.
  
    
  <script>
  
  var setCookie = function(cname, cvalue, exdays) {
     const d = new Date();
     d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
     let expires = "expires="+d.toUTCString();
     document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
  }
  var getCookie(cname) = function() {
      let name = cname + "=";
      let decodedCookie = decodeURIComponent(document.cookie);
      let ca = decodedCookie.split(';');
      for(let i = 0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
  };
  
  var e = getCookie("visitTimes");
  
  var countUpTimer = function() {
    var timerTxt = document.getElementById("time");
    var timerC = getCookie("time");
    var time = 0;
    if (timer != "") {
      time++;
      setCookie("time", time, 365);
      timerTxt.textContent = timerC;
    } else {
      setCookie("time", time, 365);
    }
  };
  var visitTimes = function() {
    var visitTxt = document.getElementById("times-visited");
    var visC = getCookie("visitTimes");
    var visTim = 0;
    if (visC != "") {
      visTim++;
      setCookie("visitTimes", visTim, 365);
      
      if (visC.toString() === "1") {
        visitTxt.textContent = "This is your first time here.";
      } else {
        visitTxt.textContent = "You have loaded this page " + visC.toString() + " times.";
      }
    } else {
      setCookie("visitTimes", visTim, 365);
    }
  };
  var setVisTim = function() {
    var visitTxt = document.getElementById("times-visited");
    var visC = getCookie("visitTimes");
    if (visC != "") {
      setCookie("visitTimes", e, 365);
    } else {
      setCookie("visitTimes", 1, 365);
      e = visC;
    }
  }
  var setTime = window.setInterval(countUpTimer, 1000);
  </script>
  </body>
</html>
